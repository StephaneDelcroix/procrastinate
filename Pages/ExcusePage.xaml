<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:strings="clr-namespace:procrastinate.Resources.Strings"
             x:Class="procrastinate.Pages.ExcusePage"
             Title="{Binding ExcuseGenerator, Source={x:Static strings:AppStrings.Instance}}"
             BackgroundColor="{DynamicResource SurfaceBackground}">

    <Shell.TitleView>
        <Grid ColumnDefinitions="*,Auto">
            <Label Text="{Binding ExcuseGenerator, Source={x:Static strings:AppStrings.Instance}}" 
                   FontSize="18" FontAttributes="Bold" 
                   TextColor="{DynamicResource Gray100}"
                   VerticalOptions="Center"/>
            <Button Grid.Column="1" Text="&#xf013;" 
                    FontFamily="FontAwesomeSolid"
                    BackgroundColor="Transparent"
                    TextColor="{DynamicResource Gray300}"
                    FontSize="20"
                    Clicked="OnSettingsClicked"
                    VerticalOptions="Center"/>
        </Grid>
    </Shell.TitleView>

    <ScrollView>
    <VerticalStackLayout Padding="24" Spacing="24" VerticalOptions="Start">
        <Label Text="&#xf630;" 
               FontFamily="FontAwesomeSolid"
               FontSize="48" 
               TextColor="{DynamicResource Tertiary}"
               HorizontalOptions="Center"/>
        <Label Text="{Binding ExcuseGenerator, Source={x:Static strings:AppStrings.Instance}}" 
               FontSize="28" 
               FontAttributes="Bold"
               TextColor="{DynamicResource Tertiary}"
               HorizontalOptions="Center"/>
        
        <Label Text="{Binding NeedAReason, Source={x:Static strings:AppStrings.Instance}}"
               FontSize="14"
               TextColor="{DynamicResource Gray400}"
               HorizontalOptions="Center"
               HorizontalTextAlignment="Center"/>
        
        <Border BackgroundColor="{DynamicResource CardBackground}" 
                StrokeShape="RoundRectangle 20"
                Stroke="Transparent"
                Padding="28"
                MinimumHeightRequest="140">
            <Border.Shadow>
                <Shadow Brush="#40000000" Offset="0,4" Radius="12" Opacity="0.3"/>
            </Border.Shadow>
            <VerticalStackLayout Spacing="16">
                <Label x:Name="ExcuseLabel"
                       Text="{Binding TapForExcuse, Source={x:Static strings:AppStrings.Instance}}"
                       FontSize="18"
                       TextColor="{DynamicResource Gray200}"
                       HorizontalTextAlignment="Center"
                       VerticalOptions="Center"/>
                <Image x:Name="ExcuseImage"
                       IsVisible="False"
                       HeightRequest="200"
                       Aspect="AspectFit"/>
                <ActivityIndicator x:Name="ImageLoadingIndicator"
                                   IsVisible="False"
                                   IsRunning="False"
                                   Color="{DynamicResource Tertiary}"/>
            </VerticalStackLayout>
        </Border>
        
        <Button x:Name="GenerateBtn"
                Text="{Binding GenerateExcuse, Source={x:Static strings:AppStrings.Instance}}"
                FontSize="18"
                HeightRequest="56"
                BackgroundColor="{DynamicResource Tertiary}"
                TextColor="White"
                CornerRadius="14"
                Clicked="OnGenerateClicked">
            <Button.ImageSource>
                <FontImageSource Glyph="&#xf522;" FontFamily="FontAwesomeSolid" Color="White" Size="18"/>
            </Button.ImageSource>
        </Button>
        
        <Button x:Name="ShareBtn"
                Text="{Binding Share, Source={x:Static strings:AppStrings.Instance}}"
                BackgroundColor="{DynamicResource CardBackgroundAlt}"
                TextColor="{DynamicResource Gray200}"
                HeightRequest="48"
                CornerRadius="12"
                Clicked="OnShareClicked">
            <Button.ImageSource>
                <FontImageSource Glyph="&#xf1e0;" FontFamily="FontAwesomeSolid" Color="{DynamicResource Gray300}" Size="16"/>
            </Button.ImageSource>
        </Button>

        <Button x:Name="GenerateImageBtn"
                Text="{Binding GenerateCartoon, Source={x:Static strings:AppStrings.Instance}}"
                BackgroundColor="{DynamicResource CardBackgroundAlt}"
                TextColor="{DynamicResource Gray200}"
                HeightRequest="48"
                CornerRadius="12"
                IsVisible="False"
                Clicked="OnGenerateImageClicked">
            <Button.ImageSource>
                <FontImageSource Glyph="&#xf03e;" FontFamily="FontAwesomeSolid" Color="{DynamicResource Gray300}" Size="16"/>
            </Button.ImageSource>
        </Button>
        
        <Label x:Name="CounterLabel"
               Text="Excuses generated today: 0"
               FontSize="13"
               TextColor="{DynamicResource Gray500}"
               HorizontalOptions="Center"/>
    </VerticalStackLayout>
    </ScrollView>
</ContentPage>
